!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.RactiveModal=e():t.RactiveModal=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ractive.extend({template:{v:4,t:[{t:4,f:[{t:7,e:"div",m:[{n:"role",f:"dialog",t:13},{n:"aria-label",f:[{t:2,r:"title"}],t:13},{n:"tabindex",f:"0",t:13},{n:"class",f:["popup-wrapper ",{t:2,r:"popup_id"}],t:13},{n:"style",f:["opacity: ",{t:2,r:"opacity"},"; display: ",{t:2,r:"display"},"; z-index: ",{t:2,r:"zindex"},"; cursor: ",{t:2,x:{r:["enableclose"],s:'_0?"pointer":"default"'}}],t:13},{n:["click"],t:70,f:"close"},{n:["keydown"],t:70,f:"keydown"}],f:[{t:7,e:"div",m:[{n:"class",f:["popup animated ",{t:2,r:"class"}," ",{t:2,r:"_in_class"}," ",{t:2,r:"_out_class"}],t:13},{n:"style",f:[{t:2,r:"style"}],t:13},{n:["click"],t:70,f:{r:["@event"],s:"[_0.stopPropagation()]"}}],f:[{t:7,e:"div",m:[{n:"class",f:"popup-titlebar",t:13}],f:[{t:7,e:"h3",m:[{n:"class",f:"popup-title",t:13}],f:[{t:2,r:"title"}]}," ",{t:4,f:[{t:7,e:"button",m:[{n:"type",f:"button",t:13},{n:"class",f:"popup-btn-close",t:13},{n:["click"],t:70,f:"close"}],f:["Ã—"]}],n:50,r:"enableclose"}]}," ",{t:7,e:"div",m:[{n:"class",f:"popup-content",t:13}],f:[{t:16}]}]}]}],n:50,r:"showpopup"}],e:{'_0?"pointer":"default"':function(t){return t?"pointer":"default"},"[_0.stopPropagation()]":function(t){return[t.stopPropagation()]}}},css:".popup-wrapper {position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1050; overflow: auto; display: none; align-items: center; justify-content: center; background-color: rgba(0, 0, 0, 0.5);} .popup {position: relative; color: #333333; float: left; background-color: #fff; top:30px; transform: translate(0,0); cursor: default; min-width: 110px; max-width: 500px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);} .popup-titlebar {padding:15px; color: #333; overflow: auto; border-bottom: 1px solid #e5e5e5;} .popup-title {margin-top:2px; margin-bottom: 0px; display: inline-block; font-size:1.25rem;} .popup-btn-close {padding: 0px 4px 0px 4px; cursor: pointer; background: 0 0; border: 0; font-weight:700; float: right; font-size: 1.5rem; line-height: 1; margin-right: -5px; color:#ccc;} .popup-btn-close:hover, .popup-btn-close:focus:hover{color:#6f6f6f; border-color: transparent; background-color: transparent;} .popup-btn-close:focus {color:#939393; border-color: transparent; background-color: transparent;} .popup-content {padding:15px 15px 15px 15px;} .popup-content .full-hr {width: auto; border: 0; border-top: 1px solid #e0e0e0; margin-top:15px; margin-bottom:15px; margin-left:-14px; margin-right:-14px;}",data:function(){return{showpopup:!1,basedon:!1,live:!1,appendto:"",class:"",in_class:"",_in_class:"",out_class:"",_out_class:"",style:"",title:"",popup_id:this._guid+"_popup",enableclose:!0,base_zindex:1050,opacity:0,display:"none",zindex:0}},on:{close:function(t){t.original.preventDefault(),this.get("enableclose")&&this.set("basedon",!1)},keydown:function(t){var e=t.original;if(27===e.which&&this.fire("close",t),9===e.which){var o=this.findAll("input, select, textarea, button, a").filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)});e.shiftKey?e.target!==o[0]&&e.target!==this.find(".popup-wrapper")||(e.preventDefault(),o[o.length-1].focus()):e.target===o[o.length-1]&&(e.preventDefault(),o[0].focus())}}},onconfig:function(){this.get("live")&&this.set("showpopup",!0)},addAnimClass:function(){return new Promise(function(t,e){var o=function(e){this.find(".popup").removeEventListener("animationend",o),this.set("_in_class",""),t()}.bind(this);this.find(".popup").addEventListener("animationend",o),this.set("opacity",1),this.set("_in_class","fadeInDown")}.bind(this))},removeAnimClass:function(){return new Promise(function(t,e){var o=function(e){this.find(".popup").removeEventListener("animationend",o),this.set("_in_class",""),this.set("opacity",0),t()}.bind(this);this.find(".popup").addEventListener("animationend",o),this.set("_in_class","fadeOutUp")}.bind(this))},onrender:function(){var t=this.get("popup_id");this.observe_basedon=this.observe("basedon",function(e,o,n){var i=this.get("live");if(!0===e){if(document.querySelector("."+t)&&"flex"===document.querySelector("."+t).style.display)return;this.elToFocus=document.activeElement,this.fire("beforeOpen");var s=this.getTopZindex(),r=0==s?this.get("base_zindex"):s+1;i||this.set("showpopup",!0),this.insert(this.get("appendto")?document.querySelector(this.get("appendto")):this.root.el),this.set({display:"flex",zindex:r}),this.addAnimClass().then(function(){this.find("[autofocus]")?this.find("[autofocus]").focus():this.find(".popup-wrapper").focus(),this.fire("afterOpen")}.bind(this))}else{if(!document.querySelector("."+t)||"flex"!==document.querySelector("."+t).style.display)return;this.fire("beforeClose"),this.removeAnimClass().then(function(){this.set({display:"none",zindex:0}),i||this.set("showpopup",!1),this.fire("afterClose");var t=this.getTopZindex();if(t>0){for(var e=document.querySelectorAll(".popup-wrapper"),o=0;o<e.length;o++)if(e[o].style.zIndex==t){var n=Ractive.getContext(e[o]).ractive;n.find("div").contains(this.elToFocus)?this.elToFocus.focus():n.find("[autofocus]")?n.find("[autofocus]").focus():n.find(".popup-wrapper").focus();break}}else document.body.contains(this.elToFocus)&&this.elToFocus.focus()}.bind(this))}},{defer:!0})},onunrender:function(){this.observe_basedon.cancel()},getTopZindex:function(){for(var t=0,e=document.querySelectorAll(".popup-wrapper"),o=0;o<e.length;o++)t=parseInt(e[o].style.zIndex)>t?parseInt(e[o].style.zIndex):t;return t}})}]).default});