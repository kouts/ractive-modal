!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Ractive")):"function"==typeof define&&define.amd?define(["Ractive"],e):"object"==typeof exports?exports.RactiveModal=e(require("Ractive")):t.RactiveModal=e(t.Ractive)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n.n(i);o.a.sharedSet({"rm.animating":void 0,"rm.delay":0}),e.default=o.a.extend({template:{v:4,t:[{t:4,f:[{t:7,e:"div",m:[{n:"class",f:["rm-backdrop ",{t:2,r:"bg_class"}," ",{t:2,r:"base_anim_class"}," ",{t:2,r:"bg_anim_class"}," backdrop-",{t:2,r:"modal_id"}],t:13},{n:"style",f:["z-index: ",{t:2,x:{r:["zindex"],s:"_0-1"}},";"],t:13}]}],n:50,r:"showbackdrop"},{t:4,f:[{t:7,e:"div",m:[{n:"class",f:["rm-wrapper ",{t:2,r:"base_anim_class"}," ",{t:2,r:"anim_class"}," ",{t:2,r:"modal_id"}],t:13},{n:"role",f:"dialog",t:13,g:1},{n:"aria-label",f:[{t:2,r:"title"}],t:13},{n:"tabindex",f:"0",t:13,g:1},{n:"style",f:["opacity: ",{t:2,r:"opacity"},"; display: ",{t:2,r:"display"},"; z-index: ",{t:2,r:"zindex"},"; cursor: ",{t:2,x:{r:["enableclose"],s:'_0?"pointer":"default"'}}],t:13},{n:["click"],t:70,f:"clickoutside"},{n:["keydown"],t:70,f:"keydown"}],f:[{t:7,e:"div",m:[{n:"class",f:["rm ",{t:2,r:"class"}],t:13},{n:"style",f:[{t:2,r:"style"}],t:13}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"rm-titlebar",g:1}],f:[{t:7,e:"h3",m:[{t:13,n:"class",f:"rm-title",g:1}],f:[{t:2,r:"title"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"rm-btn-close",g:1},{n:"type",f:"button",t:13,g:1},{n:["click"],t:70,f:"close"}],f:["Ã—"]}],n:50,r:"enableclose"}]}],n:50,x:{r:["title","enableclose"],s:"_0||_1"}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"rm-content",g:1}],f:[{t:16}]}]}]}],n:50,r:"showmodal"}],e:{"_0-1":function(t){return t-1},'_0?"pointer":"default"':function(t){return t?"pointer":"default"},"_0||_1":function(t,e){return t||e}}},css:" .rm-backdrop {position: fixed; top: 0; right: 0; bottom: 0; left: 0; background-color: rgba(0, 0, 0, 0.5);} .rm-wrapper {position: fixed; text-align: center; top: 0; right: 0; bottom: 0; left: 0; overflow-x: hidden; overflow-y: auto; display: none; outline: 0;} .rm {position: relative; display: inline-block; width:100%; text-align: left; color: #333333; background-color: #fff; top:30px; cursor: default; min-width: 110px; max-width: 500px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);} .rm-titlebar {padding:15px; color: #333; overflow: auto; border-bottom: 1px solid #e5e5e5;} .rm-title {margin-top:2px; margin-bottom: 0px; display: inline-block; font-size:1.25rem;} .rm-btn-close {padding: 0px 4px 0px 4px; cursor: pointer; background: 0 0; border: 0; font-weight:700; float: right; font-size: 1.5rem; line-height: 1; margin-right: -5px; color:#ccc;} .rm-btn-close:hover, .rm-btn-close:focus:hover{color:#6f6f6f; border-color: transparent; background-color: transparent;} .rm-btn-close:focus {color:#939393; border-color: transparent; background-color: transparent;} .rm-content {padding:15px 15px 15px 15px;} .rm-content .full-hr {width: auto; border: 0; border-top: 1px solid #e0e0e0; margin-top:15px; margin-bottom:15px; margin-left:-14px; margin-right:-14px;} .rm-fadeIn {-webkit-animation-name: rm-fadeIn; animation-name: rm-fadeIn;} @-webkit-keyframes rm-fadeIn {0% {opacity: 0} 100% {opacity: 1}} @keyframes rm-fadeIn {0% {opacity: 0} 100% {opacity: 1}} .rm-fadeOut {-webkit-animation-name: rm-fadeOut; animation-name: rm-fadeOut;} @-webkit-keyframes rm-fadeOut {0% {opacity: 1} 100% {opacity: 0}} @keyframes rm-fadeOut {0% {opacity: 1} 100% {opacity: 0}} .rm-fadeIn, .rm-fadeOut {-webkit-animation-duration: .25s; animation-duration: .25s; -webkit-animation-fill-mode: both; animation-fill-mode: both;}",data:function(){return{showmodal:!1,showbackdrop:!1,basedon:!1,live:!1,appendto:"",class:"",bg_class:"",base_anim_class:"",anim_class:"",bg_anim_class:"",bg_in_class:"rm-fadeIn",bg_out_class:"rm-fadeOut",in_class:"rm-fadeIn",out_class:"rm-fadeOut",style:"",title:"",modal_id:this._guid+"_rm",enableclose:!0,base_zindex:1051,opacity:0,display:"none",zindex:0}},delegate:!1,elToFocus:null,on:{close:function(t){t.original.preventDefault(),this.get("enableclose")&&this.set("basedon",!1)},clickoutside:function(t){t.original.target===t.node&&this.fire("close",t)},keydown:function(t){var e=t.original;if(27===e.which&&this.fire("close",t),9===e.which){var n=this.findAll("input, select, textarea, button, a").filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)});e.shiftKey?e.target!==n[0]&&e.target!==this.find(".rm-wrapper")||(e.preventDefault(),n[n.length-1].focus()):e.target===n[n.length-1]&&(e.preventDefault(),n[0].focus())}}},onconfig:function(){this.get("live")&&this.set("showmodal",!0)},onrender:function(){var t=this.get("modal_id");this.observe_basedon=this.observe("basedon",function(e,n,i){var r=this.get("live");if(!0===e){if(document.querySelector("."+t)&&"block"===document.querySelector("."+t).style.display)return;this.elToFocus=document.activeElement,this.fire("beforeOpen");var a=this.getTopZindex(),s=0===a?this.get("base_zindex"):a+2;r||this.set("showmodal",!0),this.insert(this.get("appendto")?document.querySelector(this.get("appendto")):this.root.el),this.set({display:"block",zindex:s}),this.fire("opening"),this.animateModal("in").then(function(){this.find("[autofocus]")?this.find("[autofocus]").focus():this.find(".rm-wrapper").focus(),this.fire("afterOpen")}.bind(this))}else{if(!document.querySelector("."+t)||"block"!==document.querySelector("."+t).style.display)return;this.fire("beforeClose"),this.animateModal("out").then(function(){this.set({display:"none",zindex:0}),r||this.set("showmodal",!1),this.fire("afterClose");var t=this.getTopZindex();if(t>0){for(var e=document.querySelectorAll(".rm-wrapper"),n=0;n<e.length;n++)if(e[n].style.zIndex==t){var i=o.a.getContext(e[n]).ractive;i.find(".rm-wrapper").contains(this.elToFocus)?this.elToFocus.focus():i.find("[autofocus]")?i.find("[autofocus]").focus():i.find(".rm-wrapper").focus();break}}else document.body.contains(this.elToFocus)&&this.elToFocus.focus()}.bind(this))}},{defer:!0})},onunrender:function(){this.observe_basedon.cancel()},animateModal:function(t){return new Promise(function(e,n){var i=function(n){this.find(".rm-wrapper").removeEventListener("animationend",i),this.set({anim_class:"",bg_anim_class:"","@shared.rm.animating":void 0,"@shared.rm.delay":0}),"out"==t&&this.set({showbackdrop:!1,opacity:0}),e()}.bind(this);this.find(".rm-wrapper").addEventListener("animationend",i),"object"==typeof this.get("@shared.rm.animating")&&this.set("@shared.rm.delay",this.get("@shared.rm.delay")+this.getAnimationDuration(this.get("@shared.rm.animating").find(".rm-wrapper"))+100),this.set("@shared.rm.animating",this),setTimeout(function(){"in"==t&&this.set({showbackdrop:!0,opacity:1}),this.set({anim_class:this.get(t+"_class"),bg_anim_class:this.get("bg_"+t+"_class")})}.bind(this),this.get("@shared.rm.delay"))}.bind(this))},getTopZindex:function(){for(var t=0,e=document.querySelectorAll(".rm-wrapper"),n=0;n<e.length;n++)t=parseInt(e[n].style.zIndex)>t?parseInt(e[n].style.zIndex):t;return t},getAnimationDuration:function(t){var e=window.getComputedStyle(t,null)["animation-duration"];return-1!==e.indexOf("ms")?parseFloat(e.replace("ms","")):1e3*parseFloat(e.replace("s",""))}})},function(e,n){e.exports=t}]).default});